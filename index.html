<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="
      default-src 'self';
      script-src 'self' 'unsafe-inline' https://www.gstatic.com https://cdn.jsdelivr.net https://www.google.com https://cdnjs.cloudflare.com;
      style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com;
      img-src 'self' https: data: blob:;
      font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://r2cdn.perplexity.ai;
      connect-src 'self' https://*.firebaseio.com https://*.googleapis.com https://api.emailjs.com https://www.gstatic.com https://*.cloudfunctions.net https://www.google.com;
      frame-src https://www.google.com;
      object-src 'none';
      base-uri 'self';
    ">
    <title>Matrimonio di Andrea & Giulia</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Playfair+Display:wght@400;600;700&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" href="data:,">
    
    <!-- reCAPTCHA v2 (checkbox) per form RSVP - solo questo, niente v3/App Check -->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>

    
    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-heart"></i>
                <span>Matrimonio</span>
            </div>
            <ul class="nav-menu">
                <li><a href="#home" class="nav-link">Home</a></li>
                <li><a href="#about" class="nav-link">La Nostra Storia</a></li>
                <li><a href="#ceremony" class="nav-link">Cerimonia</a></li>
                <li><a href="#reception" class="nav-link">Ricevimento</a></li>
                <li><a href="#accommodation" class="nav-link">Dove Dormire</a></li>
                <li><a href="#rsvp" class="nav-link">RSVP</a></li>
                <li><a href="#gifts" class="nav-link">Regali</a></li>
                <li><a href="#" class="nav-link" id="uploadBtn">Carica</a></li>
                <li><a href="gallery.html" class="nav-link">Galleria</a></li>
            </ul>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <div class="hero-text">
                <h1 class="hero-title">Andrea & Giulia</h1>
                <p class="hero-subtitle">Insieme per sempre</p>
                <div class="hero-date">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Domenica 5 luglio 2026</span>
                </div>
            </div>
        </div>
        <div class="hero-image">
            <video class="hero-video" autoplay loop muted playsinline preload="auto">
                <source src="wedding-video.mp4" type="video/mp4">
                <!-- Fallback per browser vecchi -->
                <img src="https://images.unsplash.com/photo-1519741497674-611481863552?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" alt="Andrea e Giulia">
            </video>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about">
        <div class="container">
            <h2 class="section-title">La Nostra Storia</h2>
            
            <!-- Countdown Timer -->
            <div class="countdown-container">
                <div class="countdown-text">Manca ancora...</div>
                <div class="countdown-timer" id="countdownTimer">
                    <div class="countdown-item">
                        <span class="countdown-value" id="days">0</span>
                        <span class="countdown-label">Giorni</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-value" id="hours">0</span>
                        <span class="countdown-label">Ore</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-value" id="minutes">0</span>
                        <span class="countdown-label">Minuti</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-value" id="seconds">0</span>
                        <span class="countdown-label">Secondi</span>
                    </div>
                </div>
            </div>
            
            <!-- Timeline -->
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="timeline-content">
                        <h3>Il Primo Incontro</h3>
                        <p class="timeline-date">Estate 2020</p>
                        <p>La nostra storia &egrave; iniziata durante un viaggio estivo in Toscana. Un incontro casuale che ha cambiato le nostre vite per sempre.</p>
                    </div>
                    <div class="timeline-image">
                        <img src="https://images.unsplash.com/photo-1511285560929-80b456fea0bc?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Primo incontro">
                    </div>
                </div>
                
                <div class="timeline-item reverse">
                    <div class="timeline-icon">
                        <i class="fas fa-ring"></i>
                    </div>
                    <div class="timeline-content">
                        <h3>La Proposta</h3>
                        <p class="timeline-date">Dicembre 2024</p>
                        <p>In una serata magica sotto le stelle, Andrea ha chiesto a Giulia di sposarlo. La risposta? Un emozionante "S&igrave;!"</p>
                    </div>
                    <div class="timeline-image">
                        <img src="https://images.unsplash.com/photo-1594552072238-5c79f90f9dd9?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="La proposta">
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-icon">
                        <i class="fas fa-church"></i>
                    </div>
                    <div class="timeline-content">
                        <h3>Il Grande Giorno</h3>
                        <p class="timeline-date">5 Luglio 2026</p>
                        <p>Il coronamento di questa bellissima storia d'amore. Circondati da famiglia e amici, celebreremo il nostro amore eterno.</p>
                    </div>
                    <div class="timeline-image">
                        <img src="https://images.unsplash.com/photo-1519741497674-611481863552?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Il matrimonio">
                    </div>
                </div>
            </div>
            
            <!-- Social Section -->
            <div class="social-section">
                <h3>Condividi i tuoi momenti con noi!</h3>
                <p>Usa l'hashtag ufficiale del matrimonio su Instagram</p>
                <div class="hashtag">#AndreaGiulia2026</div>
                <div class="social-icons">
                    <a href="https://www.instagram.com/explore/tags/AndreaGiulia2026/" target="_blank" class="social-link">
                        <i class="fab fa-instagram"></i> Segui su Instagram
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Ceremony Section -->
    <section id="ceremony" class="ceremony">
        <div class="container">
            <h2 class="section-title">Cerimonia</h2>
            <div class="ceremony-details">
                <div class="ceremony-card">
                    <div class="ceremony-icon">
                        <i class="fas fa-church"></i>
                    </div>
                    <h3>Cerimonia Religiosa</h3>
                    <p class="ceremony-time"><i class="fas fa-clock"></i> ore 15:30</p>
                    <p class="ceremony-location">Chiesa e Conservatorio di San Niccol&ograve;</p>
                    <p class="ceremony-address">Piazza Cardinale Niccol&ograve;, 6<br>59100 Prato (PO)</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Piazza+Cardinale+Niccol%C3%B2,+6,+59100+Prato+PO" target="_blank" class="maps-button">
                        <i class="fas fa-map-marker-alt"></i> Apri in Google Maps
                    </a>
                    <div class="parking-info">
                        <i class="fas fa-parking"></i>
                        <span>Parcheggio disponibile nelle vicinanze</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Reception Section -->
    <section id="reception" class="reception">
        <div class="container">
            <h2 class="section-title">Ricevimento</h2>
            <div class="reception-details">
                <div class="reception-card single-card">
                    <div class="reception-icon">
                        <i class="fas fa-glass-cheers"></i>
                    </div>
                    <h3>Cena di Gala e Festa</h3>
                    <p class="reception-time"><i class="fas fa-clock"></i> ore 18:00</p>
                    <p class="reception-location">Villa Corsini a Mezzomonte</p>
                    <p class="reception-address">Via Imprunetana per Pozzolatico, 116<br>50023 Impruneta (FI), Italia</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Via+Imprunetana+per+Pozzolatico,+116,+50023+Impruneta+FI" target="_blank" class="maps-button">
                        <i class="fas fa-map-marker-alt"></i> Apri in Google Maps
                    </a>
                    <div class="parking-info">
                        <i class="fas fa-parking"></i>
                        <span>Ampio parcheggio gratuito disponibile</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Accommodation Section -->
    <section id="accommodation" class="accommodation">
        <div class="container">
            <h2 class="section-title">Dove Dormire</h2>
            <p class="section-description">Per gli ospiti che vengono da lontano, ecco alcuni hotel consigliati nelle vicinanze</p>
            <div class="accommodation-grid">
                <div class="hotel-card">
                    <div class="hotel-icon">
                        <i class="fas fa-hotel"></i>
                    </div>
                    <h3>Hotel Villa Casagrande</h3>
                    <p class="hotel-location">Figline Valdarno</p>
                    <p class="hotel-distance"><i class="fas fa-car"></i> 15 minuti dalla villa</p>
                    <p class="hotel-description">Elegante hotel 4 stelle immerso nella campagna toscana</p>
                    <div class="hotel-contact">
                        <p><i class="fas fa-phone"></i> +39 055 956000</p>
                        <a href="https://www.google.com/maps/search/?api=1&query=Hotel+Villa+Casagrande+Figline+Valdarno" target="_blank" class="maps-button-small">
                            <i class="fas fa-map-marker-alt"></i> Mappa
                        </a>
                    </div>
                </div>
                
                <div class="hotel-card">
                    <div class="hotel-icon">
                        <i class="fas fa-bed"></i>
                    </div>
                    <h3>B&B Il Vicario</h3>
                    <p class="hotel-location">Impruneta</p>
                    <p class="hotel-distance"><i class="fas fa-car"></i> 10 minuti dalla villa</p>
                    <p class="hotel-description">Accogliente B&B con vista panoramica sulle colline</p>
                    <div class="hotel-contact">
                        <p><i class="fas fa-phone"></i> +39 055 2011111</p>
                        <a href="https://www.google.com/maps/search/?api=1&query=B%26B+Il+Vicario+Impruneta" target="_blank" class="maps-button-small">
                            <i class="fas fa-map-marker-alt"></i> Mappa
                        </a>
                    </div>
                </div>
                
                <div class="hotel-card">
                    <div class="hotel-icon">
                        <i class="fas fa-home"></i>
                    </div>
                    <h3>Agriturismo Le Torri</h3>
                    <p class="hotel-location">Impruneta</p>
                    <p class="hotel-distance"><i class="fas fa-car"></i> 8 minuti dalla villa</p>
                    <p class="hotel-description">Autentico agriturismo toscano con ristorante tipico</p>
                    <div class="hotel-contact">
                        <p><i class="fas fa-phone"></i> +39 055 2020222</p>
                        <a href="https://www.google.com/maps/search/?api=1&query=Agriturismo+Le+Torri+Impruneta" target="_blank" class="maps-button-small">
                            <i class="fas fa-map-marker-alt"></i> Mappa
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- RSVP Section -->
    <section id="rsvp" class="rsvp">
        <div class="container">
            <h2 class="section-title">Conferma la Tua Presenza</h2>
            <div class="rsvp-content">
                <p class="rsvp-text">La tua presenza &egrave; il regalo pi&ugrave; grande che potremmo desiderare. Ti preghiamo di confermare la tua partecipazione <strong>entro il 1&deg; maggio 2026</strong>.</p>
                <div class="rsvp-deadline">
                    <i class="fas fa-calendar-check"></i>
                    <span>Deadline RSVP: 1&deg; maggio 2026</span>
                </div>
                
                <!-- Form Success Message -->
                <div id="rsvpSuccessMessage" class="rsvp-success" style="display: none;">
                    <i class="fas fa-check-circle"></i>
                    <h3>Grazie per la conferma!</h3>
                    <p>Abbiamo ricevuto la tua risposta e ti abbiamo inviato una email di conferma.</p>
                    <p class="edit-info">Se vuoi modificare la tua risposta, <a href="#" id="editRsvpLink">clicca qui</a>.</p>
                </div>
                
                <form class="rsvp-form" id="rsvpForm">
                    <div class="form-group">
                        <label for="name">Nome e Cognome *</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email *</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">Telefono</label>
                        <input type="tel" id="phone" name="phone" placeholder="+39 ...">
                    </div>
                    <div class="form-group">
                        <label for="attendance">Partecipazione *</label>
                        <select id="attendance" name="attendance" required>
                            <option value="">Seleziona...</option>
                            <option value="yes">S&igrave;, parteciper&ograve;</option>
                            <option value="no">No, non potr&ograve; partecipare</option>
                        </select>
                    </div>
                    <div class="form-group" id="guestsGroup" style="display: none;">
                        <label for="guests">Numero di Ospiti *</label>
                        <select id="guests" name="guests">
                            <option value="1">1 persona</option>
                            <option value="2">2 persone</option>
                            <option value="3">3 persone</option>
                            <option value="4">4 persone</option>
                            <option value="5">5 persone</option>
                        </select>
                    </div>
                    <div class="form-group" id="intolerancesGroup" style="display: none;">
                        <label for="intolerances">Intolleranze Alimentari (opzionale)</label>
                        <textarea id="intolerances" name="intolerances" rows="3" placeholder="Es: celiachia, lattosio, vegetariano, vegano..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="message">Messaggio (opzionale)</label>
                        <textarea id="message" name="message" rows="4" placeholder="Lascia un messaggio per gli sposi..."></textarea>
                    </div>
                    
                    <!-- ReCAPTCHA -->
                    <div class="form-group recaptcha-container">
                        <div class="g-recaptcha" data-sitekey="6Lc8hOUrAAAAAKNISo5RnygXf9JsnpJz-_9hRjuW"></div>
                        <small class="recaptcha-note">Protetto da reCAPTCHA</small>
                    </div>
                    
                    <button type="submit" class="rsvp-btn" id="rsvpSubmitBtn">
                        <i class="fas fa-paper-plane"></i> Invia Conferma
                    </button>
                </form>
                
                <div class="emergency-contact">
                    <p><i class="fas fa-info-circle"></i> Per emergenze il giorno del matrimonio:</p>
                    <p><strong>Francesco:</strong> <a href="tel:+393398985125">+39 339 898 5125</a></p>
                    <p><strong>Email:</strong> <a href="mailto:francesco.perone00@gmail.com">francesco.perone00@gmail.com</a></p>
                </div>
            </div>
        </div>
    </section>

    <!-- Gifts Section -->
    <section id="gifts" class="gifts">
        <div class="container">
            <h2 class="section-title">Lista Nozze</h2>
            <div class="gifts-content">
                <p class="gifts-text">La vostra presenza &egrave; il regalo pi&ugrave; grande che potremmo desiderare. Se desiderate farci un pensiero, potete contribuire alla nostra luna di miele da sogno!</p>
                
                <!-- Honeymoon Experiences -->
                <h3 class="gifts-subtitle">
                    <i class="fas fa-heart"></i> Esperienze Luna di Miele
                </h3>
                <p class="gifts-description">Aiutateci a vivere momenti indimenticabili durante il nostro viaggio di nozze</p>
                
                <div class="experiences-grid">
                    <div class="experience-card">
                        <div class="experience-image">
                            <img src="https://images.unsplash.com/photo-1559827260-dc66d52bef19?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Cena romantica">
                        </div>
                        <div class="experience-content">
                            <h4>Cena Romantica sulla Spiaggia</h4>
                            <p>Una cena a lume di candela con vista sull'oceano</p>
                            <div class="experience-price">&euro; 150</div>
                        </div>
                    </div>
                    
                    <div class="experience-card">
                        <div class="experience-image">
                            <img src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Escursione">
                        </div>
                        <div class="experience-content">
                            <h4>Escursione in Barca al Tramonto</h4>
                            <p>Un'esperienza unica per ammirare il tramonto dal mare</p>
                            <div class="experience-price">&euro; 200</div>
                        </div>
                    </div>
                    
                    <div class="experience-card">
                        <div class="experience-image">
                            <img src="https://images.unsplash.com/photo-1540555700478-4be289fbecef?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Spa">
                        </div>
                        <div class="experience-content">
                            <h4>Giornata SPA di Coppia</h4>
                            <p>Massaggi rilassanti e trattamenti benessere</p>
                            <div class="experience-price">&euro; 250</div>
                        </div>
                    </div>
                    
                    <div class="experience-card">
                        <div class="experience-image">
                            <img src="https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Avventura">
                        </div>
                        <div class="experience-content">
                            <h4>Escursione Snorkeling</h4>
                            <p>Scoprire le meraviglie del mondo sottomarino</p>
                            <div class="experience-price">&euro; 180</div>
                        </div>
                    </div>
                    
                    <div class="experience-card">
                        <div class="experience-image">
                            <img src="https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Tour">
                        </div>
                        <div class="experience-content">
                            <h4>Tour Culturale Privato</h4>
                            <p>Alla scoperta della cultura e tradizioni locali</p>
                            <div class="experience-price">&euro; 300</div>
                        </div>
                    </div>
                    
                    <div class="experience-card">
                        <div class="experience-image">
                            <img src="https://images.unsplash.com/photo-1464037866556-6812c9d1c72e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Mongolfiera">
                        </div>
                        <div class="experience-content">
                            <h4>Volo in Mongolfiera all'Alba</h4>
                            <p>Un'esperienza mozzafiato tra le nuvole</p>
                            <div class="experience-price">&euro; 400</div>
                        </div>
                    </div>
                </div>
                
                <div class="bank-details">
                    <h3><i class="fas fa-university"></i> Coordinate Bancarie</h3>
                    <div class="bank-info">
                        <p><strong>Intestatario:</strong> Andrea Rindi & Giulia Fusi</p>
                        <p><strong>IBAN:</strong> <span class="iban-code">IT60 X054 2811 1010 0000 0123 456</span></p>
                        <p><strong>Causale:</strong> Regalo di nozze Andrea & Giulia</p>
                    </div>
                    <p class="bank-note">
                        <i class="fas fa-info-circle"></i>
                        Potete contribuire a una specifica esperienza indicandola nella causale, oppure con un importo libero
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-text">
                    <p>&copy; 2026 Afanakavav. Tutti i diritti riservati.</p>
                    <p>Fatto con <i class="fas fa-heart"></i> per il nostro matrimonio</p>
                </div>
                <div class="footer-contact">
                    <p>Per informazioni: <a href="mailto:francesco.perone00@gmail.com">francesco.perone00@gmail.com</a> o <a href="tel:+393398985125">+39 339 8985125</a></p>
                    <div class="admin-links">
                        <a href="admin-hub.html" class="admin-link" title="Pannello Admin">
                            <i class="fas fa-shield-alt"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Upload Modal -->
    <div id="uploadModal" class="upload-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Carica Foto &amp; Video</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <h3>Trascina qui le tue foto e video</h3>
                    <p>oppure <span class="click-to-browse">clicca per selezionare</span></p>
                    <input type="file" id="fileInput" multiple accept="image/*,video/*" style="display: none;">
                    <div class="upload-info">
                        <small>Formati supportati: JPG, PNG, MP4, MOV (max 100MB per file)</small>
                    </div>
                </div>
                
                <div class="upload-progress" id="uploadProgress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text" id="progressText">Caricamento...</div>
                </div>
                
                <div class="upload-preview" id="uploadPreview" style="display: none;">
                    <h4>Anteprima:</h4>
                    <div class="preview-grid" id="previewGrid"></div>
                </div>
                
                <div class="upload-actions">
                    <button id="uploadBtn" class="btn-upload" disabled>
                        <i class="fas fa-upload"></i> Carica
                    </button>
                    <button id="cancelBtn" class="btn-cancel">Annulla</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <!-- Load config.local.js FIRST (if exists, otherwise uses placeholder from firebase-config.js) -->
    <script src="config.local.js"></script>
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-functions-compat.js"></script>
    
    <script src="firebase-config.js"></script>
    <script src="script.js"></script>
    <script src="upload-modal.js"></script>
    <script src="video-handler.js"></script>
    <script src="rsvp-handler.js"></script>
</body>
</html>
